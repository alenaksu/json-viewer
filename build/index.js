let e,t,n,r,s,o,a,i=e=>e;function l(e){const t=`on${e.charAt(0).toUpperCase()}${e.slice(1)}Changed`;return function(...e){this[t]&&this[t](...e)}}function c(e,t,n){Object.defineProperty(e,t,{get(){return this.__props[t]},set(e){const r=this[t];this.__props[t]=e,this.rendered&&r!==e&&(n.onChange&&n.onChange.call(this,e,r),this.update())}})}function d(e=""){return document.createTextNode(e)}function h(e,t){return!(!e||!e.nodeType||t&&e.nodeType!==t)}function u(e,t){const[n,r]=[].concat(t);n.parentNode&&(r&&n.nextSibling!==r&&p(n.nextSibling,r),n.parentNode.replaceChild(e,n))}function p(e,t=null,n=e.parentNode){if(n)for(;e!==t;){const t=e.nextSibling;n.removeChild(e),e=t}}function f(e,t,n=t.parentNode){const[r,s]=e.range,o=t.nextSibling;let a=r;do{const e=a.nextSibling;n.insertBefore(a,o),a=e}while(a!==s);n.insertBefore(s,o)}function g(e){let t=0;for(;e=e.previousSibling;)t++;return t}function m(e){const t=[];for(;e.parentNode;)t.unshift(g(e)),e=e.parentNode;return t}const b=Symbol();function y(e,t){return x(e)&&x(t)&&e.strings===t.strings}function x(e){return e&&e[b]}const v=`__${Math.random().toString().slice(2)}_`,C=new RegExp(`\x3c!--${v}(\\d+)--\x3e|${v}(\\d+)`),N=/^(?:style|textarea)$/i;function S(e){const t=C.exec(e);return C.lastIndex=0,t?Number(t[1]||t[2]):-1}const k=[],$=[],_=[],w=window.requestAnimationFrame;let E=!1,A=0;function T(e,t){let n=0;const r=e.length;for(;Date.now()<t&&n<r;){const t=e[n++];t.task(...t.args),t.args=void 0,t.scheduled=!1}e.splice(0,n)}function O(){A++;const e=Date.now()+10*Math.ceil(.01*A);T(k,e),T($,e),k.length>0&&($.push(...k),k.length=0),$.length>0?w(O):(T(_,Number.MAX_SAFE_INTEGER),E=!1,A=0)}function j(e,t=1){const n={task:e,args:[],scheduled:!1,firstRun:!0};return(...r)=>{n.firstRun?(n.firstRun=!1,e(...r)):(n.args=r,n.scheduled||function(e,t){e.scheduled=!0,1===t?k.push(e):0===t?$.push(e):3===t&&_.push(e),E||(E=!0,w(O))}(n,t))}}class R{constructor(e,t,n){this.element=e,this.name=t,this.namespaceURI=n,this.requestUpdate=j((e=>{const{name:t,element:n,namespaceURI:r}=this;"ownerSVGElement"in n?n.setAttributeNS(r,t,e):t in n?n[t]=e:void 0!==e?n.setAttribute(t,e):n.hasAttribute(t)&&n.removeAttribute(t),this.value=e}))}update(e){e!==this.value&&this.requestUpdate(e)}}class U{constructor(e){this.requestUpdate=j((e=>{var t;(t=e)!==Object(t)?this.updateText(e):Array.isArray(e)?e=this.updateArray(e):y(e,this.element)?this.updateTemplate(e.values):this.replaceWith(e),this.value=e})),this.element=this.placeholder=e}updateArray(e){this.replaceWith(this.placeholder);const t=this.value instanceof Map?this.value:new Map;let n=this.element;const r=new Set;for(let s=0,o=e.length;s<o;s++){const o=e[s],a=String(o.key||s);let i=t.get(a);if(i)y(i,o)?i.update(o.values):(u(o.create(),i.range),t.set(a,i=o));else{const e=o.create();n.parentNode.insertBefore(e,n.nextSibling),t.set(a,i=o)}n.nextSibling!==i.range[0]&&f(i,n),n=i.range[1],r.add(a)}return t.forEach(((e,t,n)=>{r.has(t)||(e.delete(),n.delete(t))})),t}replaceWith(e){const{element:t,value:n,placeholder:r}=this;null==e&&(e=r),t!==e&&(n instanceof Map&&(n.forEach((e=>e.delete())),n.clear()),this.element=e,u(x(e)?e.create():e,x(t)?t.range:t))}updateText(e){h(this.element,Node.TEXT_NODE)||this.replaceWith(d()),this.element.textContent=e}updateTemplate(e){this.element.update(e)}update(e){e!==this.value&&this.requestUpdate(e)}}function M(){return NodeFilter.FILTER_ACCEPT}function P(e,t){const n=e.attributes;let r=n.length;for(;r--;){const{name:s,value:o,namespaceURI:a}=n.item(r),i=S(o);~i&&(e.removeAttribute(s),t[i]={type:R,name:s,namespaceURI:a,nodePath:m(e)})}}function I(e,t){const n=S(e.data);~n&&(t[n]={type:U,nodePath:m(e)},e.nodeValue="")}function L(e,t){let n;for(;null!==(n=C.exec(e.data));){const r=d();(e=e.splitText(n.index)).deleteData(0,n[0].length),e.parentNode.insertBefore(r,e),t[Number(n[1]||n[2])]={type:U,nodePath:m(r)}}}function W(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,M,!1),n=[];for(;t.nextNode();){const e=t.currentNode;if(h(e,Node.ELEMENT_NODE)){if(P(e,n),N.test(e.tagName))for(const t of e.childNodes)L(t,n)}else I(e,n)}return n}M.acceptNode=M;const B=new WeakMap;var F;class q{constructor(e,t,n){this[F]=!0,this.values=t,this.strings=e,this.context=n}withKey(e){return this.key=e,this}update(e){for(let t=0;t<e.length;t++)this.expressions[t]&&this.expressions[t].update(e[t])}delete(){p(this.range[0],this.range[1].nextSibling),this.range=void 0,this.expressions=void 0}create(){const{fragment:e,expressions:t}=function(e,t){let n=B.get(e);n||B.set(e,n=function(e,t){const n=document.createElement("template");n.innerHTML=t?`<${t}>${e}</${t}>`:e;let r=n.content;if(t){const e=document.createRange();e.selectNodeContents(r.firstChild),r=e.extractContents()}return{content:r,expressions:W(r)}}(function(e){const t=new RegExp("^[^]*<([0-9a-z-]+)(?:\\s*[^<\\s\\0\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"?|'[^']*'?|[^\\s'\">]*))?)*\\s*(>?)|[^]*(>)[^]*|[^]*$","i");let n=!1,r=e[0];for(let s=0,o=e.length;s<o-1;s++){const o=`${v}${s}`,a=e[s].match(t);a[1]?n=!a[2]:a[3]&&(n=!1),r+=(n?o:`\x3c!--${o}--\x3e`)+e[s+1]}return r}(e),t));const r=document.importNode(n.content,!0);return{fragment:r,expressions:function(e,t){return t.map((t=>new t.type(function(e,t){for(let n=0,r=t.length;n<r;n++)e=e.childNodes[t[n]];return e}(e,t.nodePath),t.name,t.namespaceURI)))}(r,n.expressions)}}(this.strings,this.context);return this.expressions=t,this.range=[e.insertBefore(d(),e.firstChild),e.appendChild(d())],this.update(this.values),e}}function D(e,t){return D.instances.has(t)||(D.instances.set(t,e),p(t.firstChild,null,t),t.appendChild(e.create())),D.instances.get(t).update(e.values)}function V(e,...t){return new q(e,t)}F=b,D.instances=new WeakMap;const z=function(e){return class extends e{constructor(){super(...arguments),this.__props=Object.create(null)}static get observedAttributes(){return function(e){if(!e.__attrs){const r=e.properties||{},s=Object.create(null),o=Object.create(null),a=e.prototype;for(const e in r){const i=(t=e,{type:(n=r[e]).call?n:n.type,onChange:!0===n.onChange?l(t):n.onChange});s[e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()]=e,o[e]=i,c(a,e,i)}e.__attrs=s,e.__props=o}var t,n;return Object.keys(e.__attrs)}(this)}attributeChangedCallback(e,t,n){const{__attrs:r,__props:s}=this.constructor;if(s&&r&&e in s){const t=r[e];this[t]=s[t].type(n)}}}}((H=HTMLElement,class extends H{constructor(){super(...arguments),this.state={},this.rendered=!1,this.renderCallbacks=[],this.renderRoot=this,this._onUpdated=j((()=>{for(;this.renderCallbacks.length;)this.renderCallbacks.shift()();this.rendered?this.updated():this.firstUpdated(),this.rendered=!0}),3)}attachShadow(e){return this.renderRoot=super.attachShadow.call(this,e)}connectedCallback(){this.update()}setState(e,t){const n=this.state;this.state=Object.assign(Object.assign({},n),"function"==typeof e?e(n,this):e),t&&this.renderCallbacks.push(t),this.update()}render(){return null}firstUpdated(){}beforeUpdate(){}updated(){}update(){this.beforeUpdate();const e=this.render();e&&D(e,this.renderRoot),this._onUpdated()}}));var H;function K(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function J(e){return e!==Object(e)}function G(e){return!!e&&!!e.nodeType}function X(e){return J(e)||G(e)}function Z(e){try{if("string"==typeof e)return JSON.parse(e)}catch(e){console.error(e)}return e}function*Q(e){const t=[["",e,[]]];for(;t.length;){const[e,n,r]=t.shift();if(e&&(yield[n,e,r]),!J(n))for(const[s,o]of Object.entries(n))t.push([`${e}${e?".":""}${s}`,o,[...r,e]])}}const Y=(e,t)=>t instanceof RegExp?!!e.match(t):function(e,t){e=e.split("."),t=t.split(".");const n=e=>"**"===e;let r=0,s=0;for(;r<e.length;){const o=t[s];if(o===e[r]||"*"===o)s++,r++;else{if(!n(o))return!1;s++,r=e.length-(t.length-s)}}return s===t.length}(e,t),ee=(e,t)=>(n,r)=>{const s={};if(e)for(const[n,o,a]of Q(r.data))Y(o,e)&&(s[o]=t,a.forEach((e=>s[e]=t)));return{expanded:s}},te=e=>()=>({highlight:e});var ne=':host{--background-color:#2a2f3a;--color:#f8f8f2;--string-color:#a3eea0;--number-color:#d19a66;--boolean-color:#4ba7ef;--null-color:#df9cf3;--property-color:#6fb3d2;--font-family:monaco,Consolas,"Lucida Console",monospace;--preview-color:rgba(222,175,143,0.9);--highlight-color:#7b0000;display:block;background-color:var(--background-color);color:var(--color);padding:.5rem;font-family:var(--font-family);font-size:1rem}.preview{color:var(--preview-color)}.null{color:var(--null-color,#df9cf3)}.key{color:var(--property-color,#f9857b);display:inline-block}.collapsable:before{display:inline-block;color:var(--color);padding-right:5px;padding-left:5px;font-size:.7rem;content:"â–¶";transition:transform 195ms ease-in;transform:rotate(90deg);color:var(--property-color)}.collapsable.collapsableCollapsed:before{transform:rotate(0)}.collapsable{cursor:pointer;user-select:none}.string{color:var(--string-color)}.number{color:var(--number-color)}.boolean{color:var(--boolean-color)}ul{padding:0;clear:both}li,ul{list-style:none}li,li ul>li,ul{position:relative}li ul>li{padding-top:.25rem;margin-left:1.5rem;padding-left:0}ul ul:before{content:"";border-left:1px solid #333;position:absolute;left:.5rem;top:.5rem;bottom:.5rem}ul ul:hover:before{border-left:1px solid #666}mark{background-color:var(--highlight-color)}';!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}(ne);let re,se,oe,ae,ie,le,ce;class de extends z{constructor(...e){super(...e),this.data=null,this.state={expanded:{},filtered:{},highlight:null},this.handlePropertyClick=e=>t=>{t.preventDefault(),this.setState(((e,t)=>t=>({expanded:{...t.expanded,[e]:!t.expanded[e]}}))(e))}}static get is(){return"json-viewer"}static get properties(){return{data:{type:Z,onChange:!0}}}connectedCallback(){let e;this.hasAttribute("data")||(e=this.innerText.trim()),this.attachShadow({mode:"open"}),super.connectedCallback(),e&&(this.data=JSON.parse(e))}expand(e,t){this.setState(ee(e,!0),t)}expandAll(){this.setState(ee("**",!0))}collapseAll(){this.setState(ee("**",!1))}collapse(e){this.setState(ee(e,!1))}*search(e){for(const[t,n,r]of Q(this.data))X(t)&&String(t).includes(e)&&(this.expand(n,(()=>{const e=this.renderRoot.querySelector(`[data-path="${n}"]`);null!==e&&(e.scrollIntoView({behavior:"smooth",inline:"center",block:"center"}),e.focus())})),this.setState(te(n)),yield{value:t,path:n});this.setState(te(null))}filter(e){var t;this.setState((t=e,(e,n)=>{const r={};if(t)for(const[e,s,o]of Q(n.data))Y(s,t)?(r[s]=!1,o.forEach((e=>r[e]=!1))):r[s]=!0;return{filtered:r}}))}resetFilter(){this.setState({filtered:{}})}renderObject(n,r){return V(re||(re=e||(e=i`<ul>${0}</ul>`)),Object.keys(n).map((e=>{const s=n[e],o=r?`${r}.${e}`:e,a=X(s),l=this.state.expanded[o]||a;return V(se||(se=t||(t=i`<li data-path="${0}" hidden="${0}">${0} ${0}</li>`)),o,this.state.filtered[o],this.renderPropertyKey({isCollapsable:!a,collapsed:!this.state.expanded[o],key:e,onClick:this.handlePropertyClick(o)}),l?this.renderNode(s,o):this.renderNodePreview(s)).withKey(e)})))}renderNode(e,t=""){return X(e)?this.renderValue(e,t):this.renderObject(e,t)}renderNodePreview(e){return V(oe||(oe=n||(n=i`<span class="preview">${0}</span>`)),function(e,t){const{nodeCount:n,maxLength:r}={nodeCount:3,maxLength:15,...void 0},s=Array.isArray(e),o=Object.keys(e),a=o.slice(0,n),i=[s?"[ ":"{ "],l=[];for(const t of a){const n=[],o=e[t],a=K(o);s||n.push(t+": "),"object"===a?n.push("{ ... }"):"array"===a?n.push("[ ... ]"):"string"===a?n.push(`"${o.substring(0,r)}${o.length>r?"...":""}"`):n.push(String(o)),l.push(n.join(""))}return o.length>n&&l.push("..."),i.push(l.join(", ")),i.push(s?" ]":" }"),i.join("")}(e))}renderPropertyKey({isCollapsable:e,collapsed:t,onClick:n,key:s}){return V(ae||(ae=r||(r=i`<span class="${0}" onClick="${0}">${0}:</span>`)),function(...e){return e.filter(Boolean).join(" ")}(s&&"key",e&&"collapsable",t&&"collapsableCollapsed"),e?n:null,s)}renderValue(e,t){const n=this.state.highlight,r=G(e)?e:V(ie||(ie=s||(s=i`<span tabindex="0" class="${0}">${0}</span>`)),K(e),JSON.stringify(e));return null!==n&&t===n?V(le||(le=o||(o=i`<mark>${0}</mark>`)),r):r}render(){return V(ce||(ce=a||(a=i`<style>${0}</style>${0}`)),ne,this.renderNode(this.data))}}customElements.define(de.is,de);
//# sourceMappingURL=index.js.map
